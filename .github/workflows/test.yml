name: CI
on: push
jobs:
  installDependencies:
    name: Install Dependencies
    runs-on: ubuntu-latest
    steps:
    - name: Check out the code
      uses: actions/checkout@v2

    - name: Install Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v2-beta
      with:
        node-version: ${{ matrix.node-version }}
      env:
        PUPPETEER_SKIP_CHROMIUM_DOWNLOAD: 'true'
        CI: 'true'
    - name: Load environment 
      uses: samujoha/gitlab-ci-puppeteer-headful:6a80adc
      env:
        CI: 'true'
    - name: Test Code
      env:
        PUPPETEER_SKIP_CHROMIUM_DOWNLOAD: 'true'
        CI: 'true'
      run: |
        npm ci
        Xvfb -ac :99 -screen 0 1280x1024x16 > /dev/null 2>&1 & # Start virtual display
        npm test # Your test command(s)
